!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).ImgLazyProcessor=t()}(this,function(){"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t){for(var M=0;t.length>M;M++){var i=t[M];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function M(e,M,i){return M&&t(e.prototype,M),i&&t(e,i),e}function i(e,t,M){return t in e?Object.defineProperty(e,t,{value:M,enumerable:!0,configurable:!0,writable:!0}):e[t]=M,e}function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var M=[],i=!0,r=!1,n=void 0;try{for(var o,s=e[Symbol.iterator]();!(i=(o=s.next()).done)&&(M.push(o.value),!t||M.length!==t);i=!0);}catch(e){r=!0,n=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw n}}return M}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function n(e){return function(e){if(Array.isArray(e)){for(var t=0,M=Array(e.length);e.length>t;t++)M[t]=e[t];return M}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}!function(){if("object"===("undefined"==typeof window?"undefined":e(window))&&!("IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype&&"isIntersecting"in window.IntersectionObserverEntry.prototype))throw TypeError("The browser does not support the IntersectionObserver API. You can add polyfill(https://github.com/w3c/IntersectionObserver) or [npm install intersection-observer] to solve this problem")}();var o="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDY3IDc5LjE1Nzc0NywgMjAxNS8wMy8zMC0yMzo0MDo0MiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkQ1RDk3QjBCQTUyQzExRThCQ0U4OEMxMDBGQTgwMkNDIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkQ1RDk3QjBDQTUyQzExRThCQ0U4OEMxMDBGQTgwMkNDIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6RDVEOTdCMDlBNTJDMTFFOEJDRTg4QzEwMEZBODAyQ0MiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6RDVEOTdCMEFBNTJDMTFFOEJDRTg4QzEwMEZBODAyQ0MiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7vHKjlAAAAEElEQVR42mL4//8/A0CAAQAI/AL+26JNFgAAAABJRU5ErkJggg==",s="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHByZXNlcnZlQXNwZWN0UmF0aW89InhNaWRZTWlkIiB3aWR0aD0iNjQiIGhlaWdodD0iNjQiIHZpZXdCb3g9IjAgMCA2NCA2NCI+CiAgPGRlZnM+CiAgICA8c3R5bGU+CiAgICAgIC5jbHMtMSB7CiAgICAgICAgZmlsbDogI2ZmZjsKICAgICAgICBmaWxsLXJ1bGU6IGV2ZW5vZGQ7CiAgICAgIH0KICAgIDwvc3R5bGU+CiAgPC9kZWZzPgogIDxwYXRoIGQ9Ik02MC4wNDksMzYuMDQ5IEw1Mi4wNDksMzYuMDQ5IEM0OS44NDAsMzYuMDQ5IDQ4LjA0OSwzNC4yNTkgNDguMDQ5LDMyLjA0OSBDNDguMDQ5LDI5Ljg0MCA0OS44NDAsMjguMDQ5IDUyLjA0OSwyOC4wNDkgTDYwLjA0OSwyOC4wNDkgQzYyLjI1OSwyOC4wNDkgNjQuMDQ5LDI5Ljg0MCA2NC4wNDksMzIuMDQ5IEM2NC4wNDksMzQuMjU5IDYyLjI1OSwzNi4wNDkgNjAuMDQ5LDM2LjA0OSBaTTQ5LjAwNiwyMC43MDEgQzQ3LjQ0MywyMi4yNjMgNDQuOTExLDIyLjI2MyA0My4zNDksMjAuNzAxIEM0MS43ODcsMTkuMTM5IDQxLjc4NywxNi42MDYgNDMuMzQ5LDE1LjA0NCBMNDkuMDA2LDkuMzg3IEM1MC41NjgsNy44MjUgNTMuMTAwLDcuODI1IDU0LjY2Miw5LjM4NyBDNTYuMjI0LDEwLjk0OSA1Ni4yMjQsMTMuNDgyIDU0LjY2MiwxNS4wNDQgTDQ5LjAwNiwyMC43MDEgWk0zMi4wMDAsNjQuMDk5IEMyOS43OTEsNjQuMDk5IDI4LjAwMCw2Mi4zMDggMjguMDAwLDYwLjA5OSBMMjguMDAwLDUyLjA5OSBDMjguMDAwLDQ5Ljg5MCAyOS43OTEsNDguMDk5IDMyLjAwMCw0OC4wOTkgQzM0LjIwOSw0OC4wOTkgMzYuMDAwLDQ5Ljg5MCAzNi4wMDAsNTIuMDk5IEwzNi4wMDAsNjAuMDk5IEMzNi4wMDAsNjIuMzA4IDM0LjIwOSw2NC4wOTkgMzIuMDAwLDY0LjA5OSBaTTMyLjAwMCwxNi4wMDAgQzI5Ljc5MSwxNi4wMDAgMjguMDAwLDE0LjIwOSAyOC4wMDAsMTIuMDAwIEwyOC4wMDAsNC4wMDAgQzI4LjAwMCwxLjc5MSAyOS43OTEsLTAuMDAwIDMyLjAwMCwtMC4wMDAgQzM0LjIwOSwtMC4wMDAgMzYuMDAwLDEuNzkxIDM2LjAwMCw0LjAwMCBMMzYuMDAwLDEyLjAwMCBDMzYuMDAwLDE0LjIwOSAzNC4yMDksMTYuMDAwIDMyLjAwMCwxNi4wMDAgWk0xNC45OTQsNTQuNzEyIEMxMy40MzIsNTYuMjc0IDEwLjkwMCw1Ni4yNzQgOS4zMzgsNTQuNzEyIEM3Ljc3Niw1My4xNTAgNy43NzYsNTAuNjE3IDkuMzM4LDQ5LjA1NSBMMTQuOTk0LDQzLjM5OCBDMTYuNTU3LDQxLjgzNiAxOS4wODksNDEuODM2IDIwLjY1MSw0My4zOTggQzIyLjIxMyw0NC45NjAgMjIuMjEzLDQ3LjQ5MyAyMC42NTEsNDkuMDU1IEwxNC45OTQsNTQuNzEyIFpNMTQuOTk0LDIwLjcwMSBMOS4zMzgsMTUuMDQ0IEM3Ljc3NiwxMy40ODIgNy43NzYsMTAuOTQ5IDkuMzM4LDkuMzg3IEMxMC45MDAsNy44MjUgMTMuNDMyLDcuODI1IDE0Ljk5NCw5LjM4NyBMMjAuNjUxLDE1LjA0NCBDMjIuMjEzLDE2LjYwNiAyMi4yMTMsMTkuMTM5IDIwLjY1MSwyMC43MDEgQzE5LjA4OSwyMi4yNjMgMTYuNTU3LDIyLjI2MyAxNC45OTQsMjAuNzAxIFpNMTUuOTUxLDMyLjA0OSBDMTUuOTUxLDM0LjI1OSAxNC4xNjAsMzYuMDQ5IDExLjk1MSwzNi4wNDkgTDMuOTUxLDM2LjA0OSBDMS43NDEsMzYuMDQ5IC0wLjA0OSwzNC4yNTkgLTAuMDQ5LDMyLjA0OSBDLTAuMDQ5LDI5Ljg0MCAxLjc0MSwyOC4wNDkgMy45NTEsMjguMDQ5IEwxMS45NTEsMjguMDQ5IEMxNC4xNjAsMjguMDQ5IDE1Ljk1MSwyOS44NDAgMTUuOTUxLDMyLjA0OSBaTTQ5LjAwNiw0My4zOTggTDU0LjY2Miw0OS4wNTUgQzU2LjIyNCw1MC42MTcgNTYuMjI0LDUzLjE1MCA1NC42NjIsNTQuNzEyIEM1My4xMDAsNTYuMjc0IDUwLjU2OCw1Ni4yNzQgNDkuMDA2LDU0LjcxMiBMNDMuMzQ5LDQ5LjA1NSBDNDEuNzg3LDQ3LjQ5MyA0MS43ODcsNDQuOTYwIDQzLjM0OSw0My4zOTggQzQ0LjkxMSw0MS44MzYgNDcuNDQzLDQxLjgzNiA0OS4wMDYsNDMuMzk4IFoiIGNsYXNzPSJjbHMtMSI+CiAgICA8YW5pbWF0ZVRyYW5zZm9ybSBhdHRyaWJ1dGVOYW1lPSJ0cmFuc2Zvcm0iIGJlZ2luPSIwcyIgZHVyPSIxcyIgdHlwZT0icm90YXRlIiBmcm9tPSIwIDMyIDMyIiB0bz0iMzYwIDMyIDMyIiByZXBlYXRDb3VudD0iaW5kZWZpbml0ZSIgLz4KICA8L3BhdGg+Cjwvc3ZnPgo=",D="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJ4TWlkWU1pZCIgd2lkdGg9IjY0IiBoZWlnaHQ9IjY0IiB2aWV3Qm94PSIwIDAgNjQgNjQiPgogIDxkZWZzPgogICAgPHN0eWxlPgogICAgICAuY2xzLTEgewogICAgICAgIGZpbGw6ICNmZmY7CiAgICAgICAgZmlsbC1ydWxlOiBldmVub2RkOwogICAgICB9CiAgICA8L3N0eWxlPgogIDwvZGVmcz4KICA8cGF0aCBkPSJNNjAuMzcxLDYwLjAwMCBMMy42MzAsNjAuMDAwIEMxLjYyNSw2MC4wMDAgMC4wMDAsNTguMzg5IDAuMDAwLDU2LjQwMiBMMC4wMDAsOC41OTkgQzAuMDAwLDYuNjEyIDEuNjI1LDUuMDAwIDMuNjMwLDUuMDAwIEw2MC4zNzEsNS4wMDAgQzYyLjM3NSw1LjAwMCA2NC4wMDAsNi42MTIgNjQuMDAwLDguNTk5IEw2NC4wMDAsNTYuNDAyIEM2NC4wMDAsNTguMzg5IDYyLjM3NSw2MC4wMDAgNjAuMzcxLDYwLjAwMCBaTTU4LjY2NywxMi45NDkgQzU4LjY2NywxMS40ODEgNTcuNDY3LDEwLjI5MSA1NS45ODYsMTAuMjkxIEw4LjAxNCwxMC4yOTEgQzYuNTMzLDEwLjI5MSA1LjMzMywxMS40ODEgNS4zMzMsMTIuOTQ5IEw1LjMzMywzMy43NTcgQzEwLjQ4NSwzOC44OTYgMjIuNTg3LDQwLjU1MiAzMS4wMDgsMzIuNTAwIEMzOS44MzAsMjQuMDY2IDUzLjgyNiwyMy45MzAgNTguNjY3LDIzLjM2NSBMNTguNjY3LDEyLjk0OSBaTTE1LjYwNywyNC43MDQgQzEyLjQyOSwyNC43MDQgOS44NTIsMjIuMTUwIDkuODUyLDE4Ljk5OCBDOS44NTIsMTUuODQ3IDEyLjQyOSwxMy4yOTIgMTUuNjA3LDEzLjI5MiBDMTguNzg2LDEzLjI5MiAyMS4zNjMsMTUuODQ3IDIxLjM2MywxOC45OTggQzIxLjM2MywyMi4xNTAgMTguNzg2LDI0LjcwNCAxNS42MDcsMjQuNzA0IFoiIGNsYXNzPSJjbHMtMSIvPgo8L3N2Zz4K",u="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJ4TWlkWU1pZCIgd2lkdGg9IjY0IiBoZWlnaHQ9IjY0IiB2aWV3Qm94PSIwIDAgNjQgNjQiPgogIDxkZWZzPgogICAgPHN0eWxlPgogICAgICAuY2xzLTEgewogICAgICAgIGZpbGw6ICNmZmY7CiAgICAgICAgZmlsbC1ydWxlOiBldmVub2RkOwogICAgICB9CiAgICA8L3N0eWxlPgogIDwvZGVmcz4KICA8cGF0aCBkPSJNNjAuMzc0LDYwLjAwMCBMMzQuNjM5LDYwLjAwMCBMNDEuMDg4LDQyLjY4MyBMMzQuNTU5LDI5LjcyNSBDNDMuMTUxLDIzLjk0NSA1NC4yNTQsMjMuODc4IDU4LjY0MiwyMy4zNjUgTDU4LjY0MiwxMi45NDkgQzU4LjY0MiwxMS40ODEgNTcuNDQzLDEwLjI5MSA1NS45NjQsMTAuMjkxIEwzNS4wNDIsMTAuMjkxIEwzNy4xNDcsNS4wMDAgTDYwLjM3NCw1LjAwMCBDNjIuMzc3LDUuMDAwIDY0LjAwMSw2LjYxMiA2NC4wMDEsOC41OTkgTDY0LjAwMSw1Ni40MDIgQzY0LjAwMSw1OC4zODkgNjIuMzc3LDYwLjAwMCA2MC4zNzQsNjAuMDAwIFpNOS44NzIsMTguOTk4IEM5Ljg3MiwxNS44NDcgMTIuNDQ2LDEzLjI5MiAxNS42MjIsMTMuMjkyIEMxOC43OTgsMTMuMjkyIDIxLjM3MywxNS44NDcgMjEuMzczLDE4Ljk5OCBDMjEuMzczLDIyLjE1MCAxOC43OTgsMjQuNzA0IDE1LjYyMiwyNC43MDQgQzEyLjQ0NiwyNC43MDQgOS44NzIsMjIuMTUwIDkuODcyLDE4Ljk5OCBaTTMuNjI1LDYwLjAwMCBDMS42MjMsNjAuMDAwIC0wLjAwMSw1OC4zODkgLTAuMDAxLDU2LjQwMiBMLTAuMDAxLDguNTk5IEMtMC4wMDEsNi42MTIgMS42MjMsNS4wMDAgMy42MjUsNS4wMDAgTDI4LjUzMyw1LjAwMCBMMjYuNDI4LDEwLjI5MSBMOC4wMzUsMTAuMjkxIEM2LjU1NiwxMC4yOTEgNS4zNTcsMTEuNDgxIDUuMzU3LDEyLjk0OSBMNS4zNTcsMzMuNzU3IEM3Ljg3MSwzNi4yNjcgMTEuOTE2LDM3LjkwMCAxNi41NTQsMzcuOTAwIEMyMC4zOTUsMzcuOTAwIDI0LjY0MywzNi43NzkgMjguNzYwLDM0LjEwNiBMMzMuMDA2LDQyLjA2NiBMMjYuNjAxLDYwLjAwMCBMMy42MjUsNjAuMDAwIFoiIGNsYXNzPSJjbHMtMSIvPgo8L3N2Zz4K";var g={bgImage:{keys:["emptyImg","errorImg","loadImg"],porperty:"background-image",handle:function(e){return"url(".concat(e,")")}},bgColor:{porperty:"background-color",handle:function(e){return e||(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"transparent")}},bgSize:{porperty:"background-size",handle:function(e){return e||(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"50%")}},bgPosition:{porperty:"background-position",handle:function(e){return e||(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"center")}},bgRepeat:{porperty:"background-repeat",handle:function(e){return e||(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"no-repeat")}}};return function(){function e(){var t=this,M=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),i(this,"_commonOption",void 0),i(this,"_elemOptions",void 0),i(this,"_mutationObserver",void 0),i(this,"_mutationOptions",void 0),i(this,"_intersectionObserver",void 0),i(this,"_mObserverCb",function(M,i){M.map(function(M){var i=M.target;if(!i._unobserve){var r=t._elemOptions.get(i);switch(M.attributeName){case"src":break;case"try-reload":if(M.oldValue&&"true"!==M.oldValue)break;i.setAttribute("try-reload","false");case"origin-src":i._isVisible?t._loadImg(i,r):i._init=!1;break;case"style":if(i._inside>0){i._inside-=1;break}case"class":default:i._isVisible?i._tips&&e.checkElemWH(i):i._reset=!0}}})}),i(this,"_iObserverCb",function(M,i){M.map(function(M){var i=M.target;i._isVisible=M.isIntersecting;var r=t._elemOptions.get(i);i._isVisible&&(i._reset&&(i._tips&&e.checkElemWH(i),i._reset=!1),i._init||(t._loadImg(i,r),i._init=!0))})}),i(this,"_setDelayTimer",function(e,M){t._clearDelayTimer(e),e._timer=setTimeout(function(e,t){e.setAttribute("src",t)},t._commonOption.delayTime,e,M)}),i(this,"_clearDelayTimer",function(e){e._timer&&(clearTimeout(e._timer),delete e._timer)}),i(this,"_imgLoad",function(M){var i=M.target;i.getAttribute("src")===o?e.checkElemWH(i,t._commonOption.sizeLimit):t._removeTips(i)}),i(this,"_imgError",function(e){var M=e.target;M.src!==window.location.href&&window.console.log("错误图片地址："+M.src),t._addTips(M)}),i(this,"_removeTips",function(M){var i=t._elemOptions.get(M);if(M._tips){M._tips=!1,M._type="";var r=e.getTempElem(M);for(var n in g)r.style.removeProperty(g[n].porperty);M._delWidth&&(r.style.removeProperty("width"),M._delWidth=!1),M._delHeight&&(r.style.removeProperty("height"),M._delHeight=!1),i.disable&&r.style.removeProperty("pointer-events"),e.checkInside(M,r),r=null}}),i(this,"_addTips",function(M,i){var r=t._elemOptions.get(M),n=function(e,t){return t?"loadImg":e?"errorImg":"emptyImg"}((M.getAttribute("origin-src")||"").trim(),i);if(M._tips){if(M._type!==n){var s=e.getTempElem(M);M._type=n;var D=g.bgImage;s.style.setProperty(D.porperty,D.handle(r[n]||t._commonOption[n])),e.checkInside(M,s),s=null}}else{M._tips=!0,M._type=n;var u=e.getTempElem(M);for(var I in g){var w=g[I];u.style.setProperty(w.porperty,w.keys?w.handle(r[n]||t._commonOption[n]):w.handle(r[I],t._commonOption[I]))}r.disable&&u.style.setProperty("pointer-events","none"),e.checkInside(M,u),u=null}M.setAttribute("src",o)}),this._elemOptions=new WeakMap,this._commonOption=function(e){for(var t=1;arguments.length>t;t++){var M=null!=arguments[t]?arguments[t]:{},r=Object.keys(M);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(M).filter(function(e){return Object.getOwnPropertyDescriptor(M,e).enumerable}))),r.forEach(function(t){i(e,t,M[t])})}return e}({loadImg:s,emptyImg:D,errorImg:u,dataset:!1,bgColor:"transparent",bgSize:"50%",bgPosition:"center",bgRepeat:"no-repeat",delayTime:300,sizeLimit:2},M),this._mutationOptions={attributes:!0,attributeOldValue:!0,attributeFilter:["origin-src","try-reload","class","style"].concat(n(r))},this._mutationObserver=new MutationObserver(this._mObserverCb),this._intersectionObserver=new IntersectionObserver(this._iObserverCb)}return M(e,[{key:"_loadImg",value:function(e,t){var M=(e.getAttribute("origin-src")||"").trim();(M||"emptyImg"!==e._type)&&(this._addTips(e,!0),t.delay?this._setDelayTimer(e,M):e.setAttribute("src",M))}}]),M(e,[{key:"observe",value:function(e,t){var M=this._elemOptions.get(e);e instanceof HTMLElement&&"IMG"===e.tagName&&!M&&(e._init=!1,e._reset=!0,e._inside=0,e.addEventListener("load",this._imgLoad),e.addEventListener("error",this._imgError),e._unobserve?e._unobserve=!1:this._mutationObserver.observe(e,this._mutationOptions),this._intersectionObserver.observe(e),this.setElemOption(e,t))}},{key:"unobserve",value:function(t){var M=this._elemOptions.get(t);t instanceof HTMLElement&&"IMG"===t.tagName&&M&&(this._clearDelayTimer(t),t.removeEventListener("load",this._imgLoad),t.removeEventListener("error",this._imgError),t._unobserve=!0,this._intersectionObserver.unobserve(t),this._commonOption.dataset&&e.delDataset(t,M),this._removeTips(t),this._elemOptions.delete(t))}},{key:"setElemOption",value:function(t){var M=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=Object.assign(this._elemOptions.get(t)||{},M);this._elemOptions.set(t,i),this._commonOption.dataset&&e.updDataset(t,i)}},{key:"destroy",value:function(){this._mutationObserver.disconnect(),this._intersectionObserver.disconnect()}}],[{key:"updDataset",value:function(e,t){for(var M=0,i=Object.entries(t);i.length>M;M++){var n=r(i[M],2);e.dataset[n[0]]=n[1]}}},{key:"delDataset",value:function(e,t){for(var M=0,i=Object.keys(t);i.length>M;M++){delete e.dataset[i[M]]}}},{key:"getTempElem",value:function(e){var t=document.createElement("img");return t.setAttribute("style",e.getAttribute("style")),t}},{key:"checkInside",value:function(e,t){e.getAttribute("style")!==t.getAttribute("style")&&(e._inside+=1,e.setAttribute("style",t.getAttribute("style")))}},{key:"checkElemWH",value:function(t,M){var i=e.getTempElem(t);t._delWidth&&(i.style.removeProperty("width"),t._delWidth=!1),t._delHeight&&(i.style.removeProperty("height"),t._delHeight=!1),e.checkInside(t,i);var r=getComputedStyle(t,""),n=r.width&&r.width.toLocaleLowerCase(),o=r.height&&r.height.toLocaleLowerCase();e.checkWHLimit(n,M)&&(i.style.setProperty("width","100%"),t._delWidth=!0),e.checkWHLimit(o,M)&&(i.style.setProperty("height","100%"),t._delHeight=!0),e.checkInside(t,i),i=null}},{key:"checkWHLimit",value:function(e,t){var M=(e||"-").replace("px","");return isNaN(M)||t>=+M}}]),e}()});
//# sourceMappingURL=img-lazy-processor.min.js.map
